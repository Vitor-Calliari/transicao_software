{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Legacy System</title>
    <link rel="stylesheet" href="{% static '/css/base.css' %}">
    <link rel="stylesheet" href="{% static '/css/dashboard.css' %}">
</head>
<body>
    {% include 'background.html' %}
    
    <div class="container-dashboard">
        {% include 'sidebar.html' %}
        
        <main>
            <!-- bem vindo  (puxando primeiro nome do usuario)-->
            <h1 class="titulo-boas-vindas">Bem vindo, {{ user.first_name|default:user.username }}!</h1>
            

            <!-- info-card -->
            <div class="grade-dashboard">
                <div class="coluna-esquerda">
                    <div class="cartao-info">
                        <div class="cartao">
                            <span class="rotulo-stat">Clientes ativos:</span>
                            <span class="valor-stat">{{ clientes_count }}</span>
                        </div>
                        <div class="cartao">
                            <span class="rotulo-stat">Produtos em estoque:</span>
                            <span class="valor-stat">{{ produtos_estoque_total }}</span>
                        </div>
                        <div class="cartao">
                            <span class="rotulo-stat">Vendas do mês:</span>
                            <span class="valor-stat">{{ vendas_mes_formatado }}</span>
                        </div>
                        <div class="cartao">
                            <span class="rotulo-stat">Fornecedores ativos:</span>
                            <span class="valor-stat">{{ fornecedores_count }}</span>
                        </div>
                        <div class="cartao">
                            <span class="rotulo-stat">Funcionários ativos:</span>
                            <span class="valor-stat">{{ funcionarios_count }}</span>
                        </div>
                        <div class="cartao alerta">
                            <span class="rotulo-stat">Produtos com estoque baixo:</span>
                            <span class="valor-stat">{{ produtos_estoque_baixo }}</span>
                        </div>
                    </div>
                    

                    <!-- ultimos registros -->
                    <div class="registros-recentes">
                        <h2 class="titulo-secao-registros">Últimos Registros</h2>
                        <div class="divisoria-registros"></div>
                        <div class="lista-registros">
                            {% for registro in ultimos_registros %}
                            <div class="item-registro">
                                <div class="info-registro">
                                    <span class="titulo-registro">{{ registro.acao }}:</span>
                                    <span class="id-registro">ID: {{ registro.id }}</span>
                                </div>
                                <span class="hora-registro">{{ registro.hora }}</span>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                
                <div class="coluna-direita">
                    <div class="cartoes-relatorio">

                        <!-- relatorio de clientes -->
                        <div class="cartao-relatorio {{ clientes_status }}">
                            <div class="cabecalho-relatorio">
                                <h2 class="titulo-relatorio">Relatório de clientes</h2>
                                <span class="subtitulo-relatorio {{ clientes_status }}">{{ novos_clientes_mes }} novos clientes</span>
                            </div>
                            <div class="numero-relatorio-{% if clientes_status == 'verde' %}positivo{% else %}negativo{% endif %}">
                                {{ clientes_count }}
                                <svg class="icone-seta {{ clientes_seta }}" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="{% if clientes_seta == 'cima' %}M7 17L17 7M17 7H7M17 7V17{% else %}M7 7L17 17M17 17H7M17 17V7{% endif %}" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        
                        <!-- relatorio de vendar -->
                        <div class="cartao-relatorio {{ vendas_status }}">
                            <div class="cabecalho-relatorio">
                                <h2 class="titulo-relatorio">Relatório de vendas:</h2>
                                <span class="subtitulo-relatorio {{ vendas_status }}">{{ vendas_mes_formatado }} em vendas</span>
                            </div>
                            <div class="numero-relatorio-{% if vendas_status == 'verde' %}positivo{% else %}negativo{% endif %}">
                                {{ vendas_total_count }}
                                <svg class="icone-seta {{ vendas_seta }}" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="{% if vendas_seta == 'cima' %}M7 17L17 7M17 7H7M17 7V17{% else %}M7 7L17 17M17 17H7M17 17V7{% endif %}" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <!-- grafico aqui depois -->
                    <div class="cartao-grafico" style="height: 350px; display: flex; align-items: center; justify-content: center;">
                        <p>Gráfico em construção '-'</p>
                    </div>
                    

                    <!-- acoes rapidas -->
                    <div class="cartoes-acao">
                        <a href="#novo-cliente" class="cartao-acao">
                            <span>Novo Cliente</span>
                            <img src="{% static '/icons/seta_icon.svg' %}" alt="Ir" class="icone-seta-pequeno">
                        </a>
                        
                        <a href="#novo-funcionario" class="cartao-acao">
                            <span>Novo Funcionário</span>
                            <img src="{% static '/icons/seta_icon.svg' %}" alt="Ir" class="icone-seta-pequeno">
                        </a>
                        
                        <a href="#registrar-venda" class="cartao-acao">
                            <span>Registrar venda</span>
                            <img src="{% static '/icons/seta_icon.svg' %}" alt="Ir" class="icone-seta-pequeno">
                        </a>
                        
                        <a href="#cadastrar-produto" class="cartao-acao">
                            <span>Cadastrar produto</span>
                            <img src="{% static '/icons/seta_icon.svg' %}" alt="Ir" class="icone-seta-pequeno">
                        </a>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <script src="{% static '/js/script.js' %}"></script>
</body>
</html>